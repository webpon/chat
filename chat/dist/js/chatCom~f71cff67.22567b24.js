(window.webpackJsonp=window.webpackJsonp||[]).push([["chatCom~f71cff67"],{"02d4":function(e,t,s){},"0449":function(e,t,s){"use strict";s("fb99")},2532:function(e,t,s){"use strict";s("4ba9")},"26e3":function(e,t,s){"use strict";s("02d4")},"2e5b":function(e,t,s){"use strict";s("a55f")},"4ba9":function(e,t,s){},5564:function(e,t,s){"use strict";s("eaf5")},"6c6c":function(e,t,s){"use strict";s.r(t);var o={name:"",data(){return{}},components:{},methods:{back(){this.$router.push({path:"/chat"})}}},i=(s("5564"),s("0c7c")),A=(o=Object(i.a)(o,(function(){var e=this,t=e.$createElement;t=e._self._c||t;return t("div",{staticClass:"chatTitle"},[t("h3",{staticClass:"msg_title"},[t("a-icon",{staticClass:"back",attrs:{type:"left"},on:{click:e.back}}),e._v(" "+e._s(e.$route.query.userName)+" ")],1)])}),[],!1,null,"6e473cce",null).exports,{name:"",data(){return{}},components:{},props:{sendmsg:{type:Object,default:{}}},computed:{imgSrc(){let e;return this.$store.state.contacts.forEach(t=>{t.username===this.sendmsg.from&&(e=t.imgSrc)}),e||s("ad71")}}}),a=(A=(s("93f6"),Object(i.a)(A,(function(){var e=this,t=e.$createElement;t=e._self._c||t;return t("div",[t("div",{staticClass:"messageWarpper"},[t("img",{directives:[{name:"viewer",rawName:"v-viewer"}],attrs:{src:e.imgSrc,alt:""}}),t("span",{staticClass:"left-wraper"},[t("span",{staticClass:"nick"},[e._v(e._s(e.sendmsg.from))]),"video"===e.sendmsg.type?t("div",{staticClass:"video"},[t("video-player",{staticStyle:{width:"100%",height:"100%"},attrs:{options:{fluid:!0,sources:[{src:e.sendmsg.msg}]}}})],1):/http|https/.test(e.sendmsg.msg)||"picture"===e.sendmsg.type?t("span",{directives:[{name:"viewer",rawName:"v-viewer"}]},[t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.sendmsg.msg,expression:"sendmsg.msg"}],staticClass:"img"})]):t("p",{staticClass:"msgCard"},[e._v(e._s(e.sendmsg.msg))])])])])}),[],!1,null,"4f23a15c",null).exports),{name:"",data(){return{myInfo:this.$store.state.myInfo}},props:{sendmsg:{type:Object,default:{}}},components:{},computed:{},created(){}});s("dd8e"),a=Object(i.a)(a,(function(){var e=this,t=e.$createElement;t=e._self._c||t;return t("div",[null!==e.sendmsg?t("div",{staticClass:"messageWarpper"},[t("span",["video"===e.sendmsg.type?t("div",{staticClass:"video"},[t("video-player",{staticStyle:{width:"100%",height:"100%"},attrs:{options:{fluid:!0,sources:[{src:e.sendmsg.msg}]}}})],1):/http|https/.test(e.sendmsg.msg)||"picture"===e.sendmsg.type?t("span",{directives:[{name:"viewer",rawName:"v-viewer"}]},[t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.sendmsg.msg,expression:"sendmsg.msg"}],staticClass:"img"})]):"string"===e.sendmsg.type?t("p",{staticClass:"msgCard"},[e._v(e._s(e.sendmsg.msg))]):e._e()]),t("img",{directives:[{name:"viewer",rawName:"v-viewer"}],attrs:{src:e.myInfo.imgSrc,alt:""}})]):e._e()])}),[],!1,null,"64dfe2dc",null).exports,A={name:"",data(){return{myInfo:JSON.parse(localStorage.myInfo)}},props:{msg:{type:Object,default:{}}},components:{messageItem:A,sendmessage:a}},a={name:"chatBody",data(){return{windowInnerHeight:window.innerHeight}},components:{msg:Object(i.a)(A,(function(){var e=this,t=e.$createElement;t=e._self._c||t;return t("div",[e.msg.to===e.$route.query.userName&&e.msg.from!==e.$store.state.myInfo.username||e.msg.from===e.$route.query.userName?t("div",[t("messageItem",{attrs:{sendmsg:e.msg}})],1):e.msg.from===e.$store.state.myInfo.username?t("div",[t("sendmessage",{attrs:{sendmsg:e.msg}})],1):e._e()])}),[],!1,null,"6219196e",null).exports},computed:{msgInfo(){return this.$store.state.msgInfo},currentMsgInfo(){let e=[];if(null!==this.$store.state.msgInfo&&"/chat/toChat"===this.$route.path)return this.$store.state.msgInfo.forEach(t=>{("群聊"===t.to&&t.to===this.$route.query.userName||t.from===JSON.parse(localStorage.myInfo).username&&t.to===this.$route.query.userName||t.from===this.$route.query.userName&&t.to===JSON.parse(localStorage.myInfo).username)&&e.push(t)}),setTimeout(()=>{var e=document.querySelector(".chatBody");e.scrollTo(0,e.scrollHeight)},50),e},session(){return JSON.parse(localStorage.getItem("myInfo"))}},mounted(){this.$refs.chatBody.style.height=`calc(${this.windowInnerHeight}px - 235px)`,setTimeout(()=>{var e=document.querySelector(".chatBody");e.scrollTo(0,e.scrollHeight)},50)},watch:{msgInfo(){setTimeout(()=>{var e=document.querySelector(".chatBody");e.scrollTo(0,e.scrollHeight)},50)}}},s("26e3"),A=Object(i.a)(a,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"chatBodytainer"}},[t("div",{ref:"chatBody",staticClass:"chatBody",attrs:{id:"chatRecord"}},this._l(this.currentMsgInfo,(function(e,s){return t("div",{key:s},[t("msg",{attrs:{msg:e}})],1)})),0)])}),[],!1,null,"574545a6",null).exports,a={data(){return{message:{type:"string",content:""},msgRecords:[],progress:0}},methods:{sendmsg(){""!==this.message.content&&(this.$store.commit("addMsg",{from:JSON.parse(localStorage.myInfo).username,to:this.$route.query.userName,msg:this.message.content,type:this.message.type}),this.$socket.emit("sendEvent",{from:JSON.parse(localStorage.myInfo).username,to:this.$route.query.userName,msg:this.message.content,type:this.message.type}),this.message.content="",this.message.type="string")},areaInput(){this.message.type="string"},uploadImg(){this.$refs.fileInputPicture.click()},uploadVideo(){this.$refs.fileInputVideo.click()},async uploadProgress(e,t){var s;e=e.target.files[0];e&&(20971520<e.size?this.$message.error("最高支持20MB大小"):((s=new FormData).append("file",e),e=await this.$http.post("http://39.103.233.82:13141/upload",s,{onUploadProgress:e=>{e=e.loaded/e.total*100|0,100==(this.progress=e)&&(this.progress=0)}}),this.message.type=t,this.message.content=e.data.fileName))}}},s("0449"),s("2e5b"),o={name:"chatCom",components:{chatTtile:o,chatBody:A,chatForm:Object(i.a)(a,(function(){var e=this,t=e.$createElement;t=e._self._c||t;return t("div",{staticClass:"chatForm"},[t("a-textarea",{attrs:{maxLength:200,placeholder:"请输入内容",rows:4},on:{input:e.areaInput,pressEnter:function(t){return t.preventDefault(),e.sendmsg(t)}},model:{value:e.message.content,callback:function(t){e.$set(e.message,"content","string"==typeof t?t.trim():t)},expression:"message.content"}}),t("span",{staticClass:"length-info"},[e._v(" "+e._s(e.message.content.length)+" / 200 ")]),t("div",{staticClass:"upload"},[t("a-icon",{style:{fontSize:"20px",color:"#08c"},attrs:{type:"picture"},on:{click:e.uploadImg}}),t("a-icon",{style:{fontSize:"20px",color:"#08c",margin:"0 20px"},attrs:{type:"play-square"},on:{click:e.uploadVideo}}),t("progress",{staticStyle:{width:"65px"},attrs:{max:"100"},domProps:{value:e.progress}}),e._v(" "+e._s(e.progress)+" % "),t("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"fileInputPicture",attrs:{accept:"image/*",type:"file"},on:{change:function(t){return e.uploadProgress(t,"picture")}}}),t("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"fileInputVideo",attrs:{accept:"video/*",type:"file"},on:{change:function(t){return e.uploadProgress(t,"video")}}})],1),t("a-button",{staticClass:"sendBtn",on:{click:e.sendmsg}},[e._v("发送")])],1)}),[],!1,null,"b7eff15e",null).exports}},s("2532"),A=Object(i.a)(o,(function(){var e=this.$createElement;e=this._self._c||e;return e("div",{staticClass:"chatCom"},[e("chatTtile"),e("chatBody"),e("chatForm")],1)}),[],!1,null,"103f4210",null);t.default=A.exports},"93f6":function(e,t,s){"use strict";s("c328")},"99dd":function(e,t,s){},a55f:function(e,t,s){},ad71:function(e,t){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCADIAMgDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwDu6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiorm5js7Sa5mO2KGNpHPooBJP5A1h+DfEsvivSZtQe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AAKoz+DdEu/Eba7c2vn3jBRiRi0YIAAYKeMgADnI4zjPNAHmXg0DxdfjUPE+rRvbaNEvlW8rBQQOjN0yAQCScknAJxwfZrW7t722jubWZJoJAGSRCCrD1BFcb4j+GGj6/qRv0llsppGBmEIBWQ55OD0Y9yOCeSCck9fp1hbaVp9vY2kfl28CBI1zkgDuT3JOST3JJoAs0UUUAQXkU09lPDbzGCZ42WOYAExsQQGAPBwSDjvivPR8JReymXXPEV9euTklQFOfqxb1PYV6TXG+KJPHL6l5Hh6G0SxKAi4ZlLhj1BDEgY7YU8d+wAOM+GPhbSNUbVl1SyS5ntJljXezYAO4HgEA5IPJB6cY5zLaw2HgH4lXUWoQRJpF7GZLeV0DCLncADgkAEFcDnlSe1ZPgPwfF4p1bVG1O5mCWkqmRYWA81yzZJbHQFSeADzwRXZ+PfDWueLdYsdOtoIYNMt0MhvJCCdxBBXGd3QAYAwSck8DABoeBvEWq+JpdSv7iGOLShII7NQuGIBOcnPOBjJ6ZJAxgiuzryjSrvx74TtI9DTQIb2KJsQzIpK7SSSCykDBJJBIBGSTmvVkLGNSyhWIBIByAccjPfB70ALXO+LPCkXiy3s7ae6kghgnEsiIuRIACCOowcE4POMng5roqKAMHxZ4aj8S+G5NLV1gYFWhcrkIynjgY4IJHHQH8K09Lsm07SbKyeYytbwJC0hGNxVQCcZOM4zjJ+pq3RQAUUUUAFZHijRF8Q+HbzTSVV5UzEzDhXBBUkjkDIAOOxNa9FAHlFh8LddurKNNV8STwoihRbxlpVRRwACWAAAAwACB0rYsPhD4atMG6N1esMZEku1SfYKAQPqTXf0UAZWneGdD0oqbHSrSFl6OIgW/76IJP51q0UUAFFFFABRRRQAUUUUAFFFFABRRRQBmaR4f0zQvtP8AZ1t5JuZDJKSxYs3OOpOAMnAHAya06KKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP//Z"},c328:function(e,t,s){},dd8e:function(e,t,s){"use strict";s("99dd")},eaf5:function(e,t,s){},fb99:function(e,t,s){}}]);